<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <title>{{ profile_username }} 点赞的帖子 - MyMiniReddit</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
<div class="max-w-4xl mx-auto p-6">

  <!-- 顶部导航 -->
  <div class="flex justify-between items-center mb-6">
    <a href="/" class="text-slate-400 text-sm">&larr; 返回首页</a>
    <div class="space-x-3 text-sm">
      {% if username %}
        <span class="opacity-80">当前登录：{{ username }}</span>

        <a href="/notifications"
           class="px-3 py-1 bg-slate-800 rounded">
          通知
          {% if unread_count and unread_count > 0 %}
            <span class="ml-1 text-xs text-emerald-400">
              ({{ unread_count }})
            </span>
          {% endif %}
        </a>

        <a href="/settings"
           class="px-3 py-1 bg-slate-800 rounded">
          设置
        </a>
        <a href="/logout"
           class="px-3 py-1 bg-slate-700 rounded">
          退出
        </a>
      {% else %}
        <a href="/login"
           class="px-3 py-1 bg-sky-500 rounded font-semibold">
          登录
        </a>
        <a href="/register"
           class="px-3 py-1 bg-emerald-500 rounded font-semibold">
          注册
        </a>
      {% endif %}
    </div>
  </div>

  <!-- 标题 + 导航 -->
  <section class="mb-6">
    <h1 class="text-2xl font-bold mb-2">{{ profile_username }} 点赞的帖子</h1>
    <div class="text-sm text-slate-300 space-x-3">
      <a href="/user/{{ profile_username }}" class="hover:underline">TA 的帖子</a>
      <span class="text-slate-500">|</span>
      <a href="/user/{{ profile_username }}/comments" class="hover:underline">TA 的评论</a>
      <span class="text-slate-500">|</span>
      <span class="font-semibold text-emerald-300">TA 点赞的帖子</span>
    </div>
  </section>

  <!-- 点赞的帖子列表 -->
  <section>
    {% if likes %}
      <div class="space-y-4">
        {% for row in likes %}
          <!-- row: (post_id, title, created_at, author, topic_id, topic_name, liked_at) -->
          <div class="bg-slate-800/80 rounded-xl p-4 hover:bg-slate-700 transition">
            <div class="flex justify-between items-center mb-1">
              <a href="/post/{{ row[0] }}" class="text-lg font-semibold hover:underline">
                {{ row[1] }}
              </a>
              <div class="text-xs text-slate-400">
                点赞时间：{{ row[6].strftime('%Y-%m-%d %H:%M') if row[6] else '' }}
              </div>
            </div>
            <div class="text-xs text-slate-400 flex flex-wrap gap-2">
              <span>
                作者：
                <a href="/user/{{ row[3] }}" class="text-sky-400 hover:underline">
                  {{ row[3] }}
                </a>
              </span>
              {% if row[5] %}
                <span>
                  | 板块：
                  <a href="/topic/{{ row[4] }}" class="text-emerald-300 hover:underline">
                    {{ row[5] }}
                  </a>
                </span>
              {% endif %}
              <span>| 发帖时间：{{ row[2].strftime('%Y-%m-%d %H:%M') if row[2] else '' }}</span>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="text-center text-slate-400 py-6">
        这个用户还没有给任何帖子点赞。
      </div>
    {% endif %}
  </section>

</div>
</body>
</html>